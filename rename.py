import os
import sys

script_path = os.path.dirname(os.path.realpath(sys.argv[0]))
root_path = os.path.join(script_path, 'exec_files')

families = os.listdir(root_path)
total = 0

for family in families:
    malwares = os.listdir(os.path.join(root_path, family))
    count = 0

    for malware in malwares:
        count += 1
        file_loc = os.path.join(root_path, family, malware)

        if malware[:11] == 'VirusShare_':
            # Remove 'VirusShare_' from the beginning of the filename
            new_name = malware[11:]
            os.rename(file_loc, os.path.join(root_path, family, new_name))

        if malware[-4:] == '.exe':
            # Remove '.exe' from the ending of the filename
            new_name = malware[:-4]
            os.rename(file_loc, os.path.join(root_path, family, new_name))

    print(count)
    total += count

print(f"Total: {total}")
